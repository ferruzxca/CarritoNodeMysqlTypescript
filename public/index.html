<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cyberpunk Neon Market</title>
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Rajdhani:wght@300;400;600&display=swap" rel="stylesheet" />
  </head>
  <body>
    <div class="neon-grid"></div>
    <header class="hero">
      <div class="hero__content">
        <h1>Cyberpunk Neon Market</h1>
        <p>Compra mercancía futurista con experiencias inmersivas, promociones exclusivas y seguridad total.</p>
        <button id="explore" class="btn btn--primary">Explorar mercancía</button>
      </div>
      <div class="hero__visual">
        <div class="card hologram">
          <span>Ofertas XR</span>
          <strong>Hasta 50% OFF</strong>
          <small>Activación inmediata</small>
        </div>
      </div>
    </header>

    <main>
      <section class="auth-panel collapsed" id="auth">
        <div class="auth-panel__header">
          <div>
            <p class="eyebrow">Control de acceso</p>
            <h2>Sesiones seguras</h2>
            <p id="authStatus">Verificando sesión...</p>
          </div>
          <button
            class="btn btn--ghost auth-panel__toggle"
            id="toggleAuthPanel"
            type="button"
            aria-expanded="false"
            aria-controls="authPanelBody"
          >
            Mostrar panel
          </button>
        </div>
        <div class="auth-panel__body" id="authPanelBody" hidden>
          <div class="auth-panel__forms">
            <form id="registerForm" class="auth-form">
              <h3>Crear usuario</h3>
              <label>
                Nombre
                <input type="text" name="name" required minlength="3" placeholder="Ava Matrix" />
              </label>
              <label>
                Correo
                <input type="email" name="email" required placeholder="ava@neon.dev" />
              </label>
              <label>
                Contraseña (12+ caracteres)
                <input type="password" name="password" required minlength="12" placeholder="••••••••••••" />
              </label>
              <label>
                Rol
                <select name="role">
                  <option value="">Cliente</option>
                  <option value="VENDOR">Vendedor</option>
                  <option value="SUPERADMIN">Superadmin</option>
                </select>
              </label>
              <button class="btn btn--secondary" type="submit">Registrar</button>
            </form>

            <form id="loginForm" class="auth-form">
              <h3>Iniciar sesión</h3>
              <label>
                Correo
                <input type="email" name="email" required placeholder="ava@neon.dev" />
              </label>
              <label>
                Contraseña
                <input type="password" name="password" required placeholder="••••••••••••" />
              </label>
              <button class="btn btn--primary" type="submit">Entrar</button>
            </form>
          </div>
          <button id="logoutButton" class="btn btn--ghost" type="button">Cerrar sesión</button>
        </div>
      </section>
      
      <section class="controls" id="catalog">
        <div class="search">
          <label for="search">Busca gadgets, chips, moda y más</label>
          <input type="search" id="search" name="search" placeholder="Implante neural, chaqueta, dron..." autocomplete="off" />
          <ul id="suggestions" class="suggestions"></ul>
        </div>
        <div class="filters">
          <select id="categoryFilter">
            <option value="">Todas las categorías</option>
            <option value="Moda">Moda Neon</option>
            <option value="Tecnología">Tecnología</option>
            <option value="Implantes">Implantes</option>
          </select>
          <input type="number" id="minPrice" placeholder="Mín $" min="0" />
          <input type="number" id="maxPrice" placeholder="Máx $" min="0" />
          <button id="applyFilters" class="btn">Filtrar</button>
        </div>
      </section>

      <section class="products" id="products"></section>

      <aside class="cart" id="cart">
        <h2>Carrito Holográfico</h2>
        <ul id="cartItems"></ul>
        <div class="cart__total">
          <span>Total:</span>
          <strong id="cartTotal">$0.00</strong>
        </div>
        <button id="checkout" class="btn btn--primary">Proceder al pago</button>
      </aside>

      <section class="reviews" id="reviews">
        <h2>Últimas reseñas</h2>
        <div id="reviewsList" class="reviews__list"></div>
      </section>

      <section class="blog" id="blog">
        <h2>Blog de sugerencias</h2>
        <div id="blogPosts" class="blog__posts"></div>
      </section>

      <section class="dashboard" id="dashboard">
        <h2>Dashboard de ventas</h2>
        <canvas id="salesChart" width="400" height="200"></canvas>
        <ul id="topProducts"></ul>
      </section>

      <section class="checkout-flow hidden" id="checkoutFlow">
        <div class="checkout-flow__header">
          <div>
            <p class="eyebrow">Simulación de checkout</p>
            <h2>Factura y logística inmersiva</h2>
            <p id="checkoutFlowStatus">Valida tu sesión y genera la factura holográfica.</p>
          </div>
          <button class="btn btn--ghost hidden" id="dismissCheckoutFlow" type="button">Cerrar vista</button>
        </div>
        <div class="checkout-flow__progress">
          <div class="checkout-flow__step is-active" data-step-indicator="invoice">
            <span>1</span>
            <strong>Factura</strong>
            <small>Detalle de compra</small>
          </div>
          <div class="checkout-flow__step" data-step-indicator="shipping">
            <span>2</span>
            <strong>Envío</strong>
            <small>Opciones futuristas</small>
          </div>
          <div class="checkout-flow__step" data-step-indicator="confirmation">
            <span>3</span>
            <strong>Seguimiento</strong>
            <small>Estado del paquete</small>
          </div>
        </div>

        <div class="checkout-panels">
          <article class="checkout-panel" data-step="invoice">
            <header class="checkout-panel__header">
              <div>
                <p class="eyebrow">Factura electrónica</p>
                <h3>Pedido <span id="invoiceNumber">—</span></h3>
                <p>Cliente: <span id="invoiceUser">Sesión requerida</span></p>
              </div>
              <div class="invoice-status">
                <span id="invoiceAutoStatus">Facturación en espera...</span>
              </div>
            </header>
            <ul id="invoiceItems" class="invoice-items"></ul>
            <div class="invoice-total">
              <span>Total pagado</span>
              <strong id="invoiceTotal">$0.00 MXN</strong>
            </div>
            <div class="invoice-share-field">
              <label for="invoiceWhatsApp">Número de WhatsApp</label>
              <input
                id="invoiceWhatsApp"
                name="invoiceWhatsApp"
                type="tel"
                inputmode="tel"
                placeholder="+52 55 1234 5678"
                aria-describedby="invoiceShareStatus"
              />
              <small>Enviaremos el PDF firmado en el mismo mensaje.</small>
            </div>
            <div class="invoice-share-field">
              <label for="invoiceTelegram">Chat ID de Telegram</label>
              <input
                id="invoiceTelegram"
                name="invoiceTelegram"
                type="text"
                inputmode="numeric"
                placeholder="123456789"
                aria-describedby="invoiceShareStatus"
              />
              <small>Usa el chat ID del bot (@BotFather) para recibir tu factura.</small>
            </div>
            <div class="invoice-actions">
              <button class="btn btn--secondary" id="sendInvoiceEmail" type="button">Enviar por correo</button>
              <button class="btn btn--secondary" id="sendInvoiceWhatsApp" type="button">Enviar por WhatsApp</button>
              <button class="btn btn--secondary" id="sendInvoiceTelegram" type="button">Enviar por Telegram</button>
              <a class="btn btn--primary" id="downloadInvoice" href="#" target="_blank" rel="noopener">Descargar PDF</a>
            </div>
            <p class="status-pill hidden" id="invoiceShareStatus"></p>
            <div class="panel-actions">
              <button class="btn btn--primary" id="goToShipping" type="button">Continuar con envíos</button>
            </div>
          </article>

          <article class="checkout-panel hidden" data-step="shipping">
            <header class="checkout-panel__header">
              <div>
                <p class="eyebrow">Opciones de envío</p>
                <h3>Define cómo recibes tu pedido</h3>
                <p>Selecciona una modalidad de entrega. Puedes ajustar la opción antes de confirmar.</p>
              </div>
            </header>
            <div id="shippingOptions" class="shipping-options"></div>
            <div class="panel-actions">
              <button class="btn btn--ghost" id="backToInvoice" type="button">Volver a factura</button>
              <button class="btn btn--primary" id="confirmShippingButton" type="button" disabled>Confirmar envío</button>
            </div>
          </article>

          <article class="checkout-panel hidden" data-step="confirmation">
            <header class="checkout-panel__header">
              <div>
                <p class="eyebrow">Confirmación</p>
                <h3>Seguimiento del paquete</h3>
                <p>Visualiza los hitos de envío y el estado del paquete simulado.</p>
              </div>
            </header>
            <div id="shippingSummary" class="shipping-summary"></div>
            <div id="trackingTimeline" class="tracking-timeline"></div>
            <div class="panel-actions">
              <button class="btn btn--ghost" id="backToShipping" type="button">Editar envío</button>
              <button class="btn btn--primary" id="finishCheckoutFlow" type="button">Finalizar simulación</button>
            </div>
          </article>
        </div>
      </section>
    </main>

    <footer>
      <p>© 2025 Cyberpunk Innovex.</p>
    </footer>

    <script type="module" src="/dist/main.js"></script>
  </body>
</html>
